# ChatGPT風チャットフロー設計（Dify用）

## 🔧 1. 基本構成

- **LLMプロンプト設計**
  - 例: `あなたは親切で知識豊富なAIアシスタントです。`
  - 汎用的な質問にも対応できるよう、柔軟なプロンプトを設計する。

- **会話変数（Conversation Variables）**
  - 例: `user_name`, `interest`, `last_question`
  - パーソナライズや状況判断に使用。

- **メモリ（記憶）対応**
  - 一時記憶（セッション内）：Difyが自動保持
  - 長期記憶（セッションを超える）：外部ストレージやプラグインで対応

- **ステップ分岐（分岐ロジック）**
  - 条件付き分岐を使って特定のトピックや処理に誘導可能

---

## 🧠 2. ユーザー体験向上のための工夫

- **フォールバック処理**
  - 理解不能な入力に対して、丁寧な案内を用意
  - 例: 「すみません、もう少し詳しく教えてもらえますか？」

- **意図認識（Intent Detection）**
  - 入力に含まれるキーワードやパターンで分岐
  - 例: 「PDF」「天気」「ニュース」など

- **Web検索分岐（プラグイン使用）**
  - 例: 「2025年のイベントは何？」 → Web検索に分岐

- **文体調整（出力スタイル制御）**
  - `tone` 変数等で、カジュアル／敬語などを切替可能

---

## 🧩 3. プラグイン・外部連携

- **検索エンジン連携**
  - Perplexity, DuckDuckGo などのAPIで知識を補完

- **Box / Notion 連携**
  - 社内資料からの自動回答生成

- **データベース連携**
  - よくある質問やユーザー情報の読み取り／保存

---

## 🎯 ChatGPTとDifyの違い（比較表）

| 観点         | ChatGPT               | Difyチャットフロー                  |
|--------------|------------------------|-------------------------------------|
| 自由対話性   | 高い（汎用モデル）     | 工夫次第で再現可能（プロンプト＋分岐）|
| 記憶         | セッション中の記憶     | 会話変数 or 外部連携で実現可能     |
| 出力の柔軟性 | 多様な出力（画像・HTML）| プラグインで拡張可能               |
| UI           | 固定UI                 | カスタムUI可能（API提供あり）       |

---

## ✅ 補足：自由対話型か、目的特化型か

- 汎用型（ChatGPT的）：
  - フリーフォームプロンプト＋検索連携＋長期記憶

- 目的特化型（例：問い合わせ対応）：
  - 質問パターンに応じた分岐＋テンプレート応答＋DB連携
